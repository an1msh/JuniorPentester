# Check if a root domain was provided as an argument
if [ $# -eq 0 ]; then
  echo "Error: No root domain provided"
  exit 1
fi

# Find all the subdomains and assets for the root domain
root_domain=$1
echo "Finding subdomains and assets for $root_domain..."
subfinder -d $root_domain -o subdomains.txt
assetfinder --subs-only $root_domain >> subdomains.txt

# Generate further subdomains using altdns
echo "Generating additional subdomains using altdns..."
python3 altdns/altdns.py -i subdomains.txt -o altdns_output.txt -w altdns/words.txt

# Check which subdomains resolve using parallelism
echo "Checking which subdomains resolve..."
cat altdns_output.txt | xargs -P 10 -I % bash -c 'if host % &>/dev/null; then echo % >> resolved-subdomains.txt; fi'

echo "Done!" 
